<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My Valentine ‚ù§Ô∏è</title>

<style>

/* RESET */
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:'Segoe UI', sans-serif;
}

/* ANIMATED GLOW BACKGROUND */
body{
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
  background: linear-gradient(270deg,#ff4d6d,#ff758c,#ff7eb3,#ffb199);
  background-size:600% 600%;
  animation: glowBG 12s ease infinite;
}

@keyframes glowBG{
  0%{background-position:0% 50%;}
  50%{background-position:100% 50%;}
  100%{background-position:0% 50%;}
}

/* CARD */
.card{
  position:relative;
  padding:50px;
  width:440px;
  text-align:center;
  border-radius:22px;
  backdrop-filter: blur(18px);
  background: rgba(255,255,255,0.2);
  box-shadow:0 30px 60px rgba(0,0,0,0.25);
  color:white;
}

.card h2{
  font-size:30px;
}

.buttons{
  margin-top:35px;
}

button{
  padding:14px 30px;
  border:none;
  border-radius:12px;
  font-size:17px;
  cursor:pointer;
  transition:0.25s;
}

/* YES */
#yesBtn{
  background:white;
  color:#ff4d6d;
  font-weight:bold;
}

/* NO */
#noBtn{
  position:absolute;
  background:#ff4d6d;
  color:white;
}

/* POPUP */

.popup{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.75);
  display:flex;
  justify-content:center;
  align-items:center;
  visibility:hidden;
  opacity:0;
  transition:0.4s;
}

.popup.show{
  visibility:visible;
  opacity:1;
}

.popup-content{
  background:white;
  color:#ff4d6d;
  padding:55px;
  border-radius:20px;
  text-align:center;
  animation:pop 0.5s ease;
}

@keyframes pop{
  from{
    transform:scale(0.5);
    opacity:0;
  }
  to{
    transform:scale(1);
    opacity:1;
  }
}

/* CONFETTI */

.confetti{
  position:fixed;
  width:10px;
  height:10px;
  animation:fall 3s linear forwards;
}

@keyframes fall{
  to{
    transform:translateY(100vh) rotate(720deg);
  }
}

/* HEARTS */

.heart{
  position:fixed;
  font-size:22px;
  animation: floatUp 2s linear forwards;
}

@keyframes floatUp{
  to{
    transform:translateY(-220px);
    opacity:0;
  }
}

</style>
</head>

<body>

<div class="card">
    <h2>Will you be my Valentine? üíñ</h2>

    <div class="buttons">
        <button id="yesBtn">Yes ü´∂</button>
        <button id="noBtn">No üò¢</button>
    </div>
</div>

<div id="popup" class="popup">
    <div class="popup-content">
        <h1>üéØ Target Locked!</h1>
        <p><b>No cancellation allowed.</b></p>

        <button onclick="closePopup()" 
        style="margin-top:20px;padding:10px 20px;border:none;border-radius:10px;background:#ff4d6d;color:white;cursor:pointer;">
        Close ‚ù§Ô∏è
        </button>
    </div>
</div>

<script>

const yesBtn = document.getElementById("yesBtn");
const noBtn = document.getElementById("noBtn");
const popup = document.getElementById("popup");

let hoverCount = 0;
let previousPositions = [];

/* SMART NO BUTTON */

const noTexts = [
"Stop chasing me üòà",
"Nope!",
"Try harder üòÇ",
"You can't catch me!",
"Almost!",
"Just click YES already ‚ù§Ô∏è"
];

noBtn.addEventListener("mouseenter", () => {

    if(hoverCount < noTexts.length){
        noBtn.innerText = noTexts[hoverCount];
    }

    hoverCount++;

    yesBtn.style.transform = `scale(${1 + hoverCount*0.08})`;
    noBtn.style.transform = `scale(${Math.max(0.45, 1 - hoverCount*0.06)})`;

    const card = document.querySelector(".card");

    const maxX = card.clientWidth - noBtn.offsetWidth;
    const maxY = card.clientHeight - noBtn.offsetHeight;

    let newX, newY;
    let safe = false;
    let attempts = 0;

    while(!safe && attempts < 40){

        newX = Math.random() * maxX;
        newY = Math.random() * maxY;

        safe = previousPositions.every(pos => {
            const dist = Math.hypot(newX - pos.x, newY - pos.y);
            return dist > 130;
        });

        attempts++;
    }

    previousPositions.push({x:newX, y:newY});

    if(previousPositions.length > 6){
        previousPositions.shift();
    }

    noBtn.style.left = newX + "px";
    noBtn.style.top = newY + "px";

    if(hoverCount > 6){
        noBtn.style.display="none";
    }
});


/* POPUP */

yesBtn.addEventListener("click", () => {

    popup.classList.add("show");
    createConfetti();
    createHearts();

});

function closePopup(){
    popup.classList.remove("show");
}

/* close when clicking outside */
popup.addEventListener("click", (e)=>{
    if(e.target === popup){
        closePopup();
    }
});


/* CONFETTI */

function createConfetti(){
    for(let i=0;i<120;i++){
        const confetti = document.createElement("div");
        confetti.classList.add("confetti");

        confetti.style.left = Math.random()*100+"vw";
        confetti.style.top = "-10px";
        confetti.style.background =
        `hsl(${Math.random()*360},100%,70%)`;

        document.body.appendChild(confetti);
        setTimeout(()=>confetti.remove(),3000);
    }
}

/* HEARTS */

function createHearts(){
    for(let i=0;i<30;i++){
        const heart = document.createElement("div");
        heart.classList.add("heart");
        heart.innerHTML="üíñ";

        const rect = yesBtn.getBoundingClientRect();

        heart.style.left = rect.left + rect.width/2 + "px";
        heart.style.top = rect.top + "px";

        document.body.appendChild(heart);
        setTimeout(()=>heart.remove(),2000);
    }
}

</script>

</body>
</html>

